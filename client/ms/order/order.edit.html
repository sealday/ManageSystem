<div>
  <h2>新建订单</h2>

  <form action="">
    <div>
      <label>始发地</label>
      <input ng-model="oec.order.from">
    </div>
    <div>
      <label>目的地</label>
      <input ng-model="oec.order.to">
    </div>
    <div>
      <label>签单时间</label>
      <input ng-model="oec.order.date" type="date">
    </div>
    <div>
      <label>经手人</label>
      <input ng-model="oec.order.handler">
    </div>
    <fieldset>
      <legend>司机信息</legend>
    </fieldset>
    <div>
      <input type="submit" value="保存">
    </div>
    <div ng-repeat="product in oec.allProducts" style="display: inline-block;">
      <label><input ng-model="oec.products[product.name].includes" ng-change="oec.initProduct(product.name)" type="checkbox">{{product.name}}</label>
    </div>
    <div ng-repeat="(productName, product) in oec.products">
      <fieldset ng-if="product.includes">
        <legend>{{productName}}</legend>
        <a href="" ng-click="oec.add(product)">增加</a>
        <div ng-repeat="item in product.items">
          <label>规格<input ng-model="item.spec" focus-me focus-next>
          <select ng-model="item.spec" ng-options="spec for spec in oec.specs(productName)">
            <option value="">请选择</option>
          </select>
          </label>
          <label>数量<input ng-model="item.number" ng-keyup="oec.onKeyup($event, product)">{{oec.unit(productName)}}</label>
          <a href="" ng-click="oec.remove(items, item)">删除</a>
        </div>
        <p><strong>总数量</strong>{{oec.total(product.items, productName)}} {{oec.unit(productName)}} </p>
      </fieldset>
    </div>
    <p>{{oec.weight()}}</p>
  </form>
</div>
